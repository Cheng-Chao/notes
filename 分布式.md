#### 推荐[参考资料](http://blog.csdn.net/followmyinclinations/article/details/52870418)  
#### 分布式操作系统和数据库相关的知识：  
1. ACID atomicity consistency（系统中不存在失败的事务） isolation durability    
2. 4 levels of isolation :  

     ![](http://images2015.cnblogs.com/blog/903715/201611/903715-20161102150430955-492049629.png)  

   * read uncommitted（脏读）;  
   * read committed（不可重复读【主要原因是事务希望可重复读{前后读取的数据一致}】）;   
   * repeatable read（幻读【增删】，）;   
   * serialization（最高级别）。  

3. cap理论 分布式操作系统的3大特性：**一致性，可用性，和分区容错性不可能同时满足**。    

    一致性：其中一个节点的数据正确的修改后其他节点的数据也应该相应的正确修改。  

    可用性：**有限时间内**总能**返回正常响应结果**；  

    分区容错性：  发生分区故障时；依然提供一致性和可用性服务；  

#### base 理论
* 基本可用（base available）  
* soft state (软状态：允许系统存在中间状态，并且不会对系统实际状态产生影响)  
* eventually consistency （最终一致性）  

    * 因果一致 causal consistency  
    * read your writes   
    * session consistency  
    * monotonic read consistency  
    
1. 分布式一致性解决方案：  
  强一致性：写入什么，读出什么。  性能差  
  弱一致性： 不承诺立即可读, 保证某个时间级别后达到一致。 又分为回话一致性和用户一致性：同一会话保证读到一致，或者同一用户保证一致。  
  最终一致性： 是弱一致性的一种特例。保证一段时间内，达到一致。  
----  

#### 一致性协议  

2PC (phase commit):  
2种角色：协调者coordinator（1个）; 参与者（很多）

    1 提交事务请求  
      1.1 事务询问（协调者->参与者）  
      1.2 执行事务（参与者）  
      1.3 参与者向协调者反馈事务询问响应（参与者->协调者）  

    2 执行事务提交
      2.1 发送提交请求 （协调者->参与者）    
      2.2 事务提交  (参与者)  
      2.3 反馈事务提交结果 (参与者->协调者)   
      2.4 完成事务  (协调者)  
pros & cons:  
简单易实现；  
**同步阻塞**（必须要等所有参与者完成）；**单点问题**（如果协调者出现问题\~呵呵）；**数据不一致(brain split)**（如果协调者在phase 2中的回复消息丢失~造成有的数据库更新了，其他的没有）；**太过保守**。  

3PC (phase commit)  

paxos  

